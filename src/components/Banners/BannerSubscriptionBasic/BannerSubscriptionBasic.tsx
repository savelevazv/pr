import { FC, useState } from "react";
import { useFormik } from "formik";

import { InputBanner } from "../../Inputs/InputBanner";
import { RegistrationValidationSchema } from "../../RegistrationValidationSchema";

import { Div } from "../../../styles/Div.styled";
import { Flex } from "../../../styles/Flex.styled";
import { StyledP, StyledSpan } from "../../../styles/Fonts.styled";
import { StyledBannerStatisticsBtn } from "../../Buttons/Buttons.styled";

//добавить крестик

export const BannerSubscriptionBasic: FC = () => {
    const [subscription, setSubscription] = useState<boolean>(false)

    const {
        values,
        errors,
        touched,
        setFieldValue,
        setFieldTouched,
        isValid,
        dirty,
        handleSubmit
    } = useFormik({
        initialValues: {
            email: ''
        },
        validateOnChange: true,
        validationSchema: RegistrationValidationSchema,
        onSubmit(values, { resetForm }) {
            console.log(values);
            resetForm();
        }
    })
    return (
        <Flex
            backgroundColor={'#F13C47'}
            margin={'60px 0 50px 0'}
            br={'14px'}
            width={'100%'}
            height={'180px'}
            align={'center'}
            justify={'space-between'}
            position={'relative'}
            padding={'40px'}
        >
            <svg style={{ position: 'absolute', bottom: '40px', left: '36%' }} width="139" height="97" viewBox="0 0 139 97" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M78.0599 15.3607C74.6499 15.7207 63.3099 16.5807 59.3799 12.1407C58.7165 11.4191 58.2553 10.5352 58.0428 9.57828C57.8304 8.62135 57.8742 7.6253 58.1699 6.69074C59.0099 3.30074 61.5399 1.62073 65.1099 1.62073C69.7699 1.62073 75.9399 4.79073 79.1099 8.62073C81.2199 4.97073 85.3399 -0.589276 91.5399 0.050724C96.0399 0.500724 99.4399 3.92073 99.1199 7.68073C98.9499 9.68073 97.0499 16.0807 80.1199 15.3007L78.8999 18.6507L78.0599 15.3607ZM65.1099 5.36072C63.2599 5.36072 62.2499 5.93073 61.8199 7.65073C61.5199 8.86073 61.8199 9.25073 62.1999 9.65073C64.2999 12.0207 71.7599 12.3607 76.8999 11.9107C75.0199 8.89074 69.2299 5.38074 65.1099 5.38074V5.36072ZM81.6799 11.5707C92.1299 11.8407 95.2499 9.01074 95.3899 7.35074C95.5099 5.88074 93.7399 4.04074 91.1899 3.78074C90.9933 3.77078 90.7964 3.77078 90.5999 3.78074C86.1099 3.77074 82.9699 8.99073 81.6799 11.5907V11.5707Z" fill="#31A169" />
                <g opacity="0.7">
                    <path d="M78.0599 15.3607C74.6499 15.7207 63.3099 16.5807 59.3799 12.1407C58.7165 11.4191 58.2553 10.5352 58.0428 9.57828C57.8304 8.62135 57.8742 7.6253 58.1699 6.69074C59.0099 3.30074 61.5399 1.62073 65.1099 1.62073C69.7699 1.62073 75.9399 4.79073 79.1099 8.62073C81.2199 4.97073 85.3399 -0.589276 91.5399 0.050724C96.0399 0.500724 99.4399 3.92073 99.1199 7.68073C98.9499 9.68073 97.0499 16.0807 80.1199 15.3007L78.8999 18.6507L78.0599 15.3607ZM65.1099 5.36072C63.2599 5.36072 62.2499 5.93073 61.8199 7.65073C61.5199 8.86073 61.8199 9.25073 62.1999 9.65073C64.2999 12.0207 71.7599 12.3607 76.8999 11.9107C75.0199 8.89074 69.2299 5.38074 65.1099 5.38074V5.36072ZM81.6799 11.5707C92.1299 11.8407 95.2499 9.01074 95.3899 7.35074C95.5099 5.88074 93.7399 4.04074 91.1899 3.78074C90.9933 3.77078 90.7964 3.77078 90.5999 3.78074C86.1099 3.77074 82.9699 8.99073 81.6799 11.5907V11.5707Z" fill="white" />
                </g>
                <path d="M42.57 63.7507L115.96 63.7507V13.3407L42.57 13.3407V63.7507Z" fill="#31A169" />
                <path d="M61.0901 63.7507H67.05V13.3407H61.0901L61.0901 63.7507Z" fill="#31A169" />
                <path opacity="0.2" d="M86.8 63.7507L115.96 63.7507V13.3407L86.8 13.3407V63.7507Z" fill="black" />
                <path d="M101.27 63.7507H105.65V13.3407H101.27V63.7507Z" fill="#31A169" />
                <path opacity="0.8" d="M61.0901 63.7507H67.05V13.3407H61.0901L61.0901 63.7507Z" fill="white" />
                <path opacity="0.7" d="M101.27 63.7507H105.65V13.3407H101.27V63.7507Z" fill="white" />
                <path d="M44.3701 37.5106C41.8901 36.6206 20.1101 28.5106 18.8901 20.8306C18.6001 19.0506 19.3501 17.4607 21.1101 16.0907C21.9637 15.385 22.9727 14.8919 24.054 14.652C25.1353 14.4121 26.2581 14.4322 27.3301 14.7107C32.2201 15.8907 37.0001 21.8006 40.4301 27.1406C38.5901 20.6906 37.1601 12.8306 39.6801 9.14065C40.1967 8.40593 40.8972 7.81972 41.7115 7.44066C42.5257 7.06161 43.4253 6.90298 44.3201 6.98064C45.2554 6.96888 46.1786 7.19373 47.0038 7.6343C47.829 8.07487 48.5295 8.71688 49.0401 9.50066C51.7101 13.5807 50.1501 22.0507 48.3401 28.5007C52.3401 22.2307 57.8901 14.7107 61.7801 15.0407C62.7801 15.1207 64.1201 15.7107 64.9501 18.0407C65.3247 19.1034 65.4755 20.2321 65.3928 21.3559C65.3102 22.4796 64.9961 23.5742 64.4701 24.5707C60.5401 32.4107 45.5901 37.2307 44.9601 37.4307C44.8707 37.4452 44.7795 37.4452 44.6901 37.4307C44.5886 37.4749 44.4804 37.5019 44.3701 37.5106ZM46.6601 34.9506C50.9501 33.3006 60.1001 29.2507 62.8101 23.8207C63.2302 23.0477 63.4822 22.1946 63.5494 21.3174C63.6166 20.4402 63.4976 19.5586 63.2001 18.7306C62.6001 17.0006 61.8701 16.9407 61.6301 16.9307H61.5201C58.0501 16.9207 51.0601 27.1806 46.6601 34.9506ZM22.2301 17.5307C21.7155 17.8334 21.2975 18.2761 21.0248 18.8072C20.7522 19.3384 20.6361 19.9361 20.6901 20.5307C21.5001 25.6107 35.3501 32.0306 42.8001 34.9506C40.2601 30.0506 33.4501 18.0707 26.8801 16.4907C26.4416 16.3819 25.9918 16.3249 25.5401 16.3207C24.3306 16.3322 23.1619 16.7594 22.2301 17.5307V17.5307ZM41.2301 10.2306C38.2901 14.4806 42.1701 27.3207 44.7001 34.0707C47.0301 27.5007 50.5001 15.0707 47.5401 10.5507C47.1897 10.0153 46.7078 9.5789 46.1405 9.28301C45.5733 8.98712 44.9396 8.84169 44.3001 8.86065H44.1201C43.553 8.81154 42.9829 8.91224 42.4669 9.15267C41.951 9.3931 41.5072 9.76482 41.1801 10.2306H41.2301Z" fill="#303030" />
                <g opacity="0.3">
                    <path d="M44.3701 37.5106C41.8901 36.6206 20.1101 28.5106 18.8901 20.8306C18.6001 19.0506 19.3501 17.4607 21.1101 16.0907C21.9637 15.385 22.9727 14.8919 24.054 14.652C25.1353 14.4121 26.2581 14.4322 27.3301 14.7107C32.2201 15.8907 37.0001 21.8006 40.4301 27.1406C38.5901 20.6906 37.1601 12.8306 39.6801 9.14065C40.1967 8.40593 40.8972 7.81972 41.7115 7.44066C42.5257 7.06161 43.4253 6.90298 44.3201 6.98064C45.2554 6.96888 46.1786 7.19373 47.0038 7.6343C47.829 8.07487 48.5295 8.71688 49.0401 9.50066C51.7101 13.5807 50.1501 22.0507 48.3401 28.5007C52.3401 22.2307 57.8901 14.7107 61.7801 15.0407C62.7801 15.1207 64.1201 15.7107 64.9501 18.0407C65.3247 19.1034 65.4755 20.2321 65.3928 21.3559C65.3102 22.4796 64.9961 23.5742 64.4701 24.5707C60.5401 32.4107 45.5901 37.2307 44.9601 37.4307C44.8707 37.4452 44.7795 37.4452 44.6901 37.4307C44.5886 37.4749 44.4804 37.5019 44.3701 37.5106ZM46.6601 34.9506C50.9501 33.3006 60.1001 29.2507 62.8101 23.8207C63.2302 23.0477 63.4822 22.1946 63.5494 21.3174C63.6166 20.4402 63.4976 19.5586 63.2001 18.7306C62.6001 17.0006 61.8701 16.9407 61.6301 16.9307H61.5201C58.0501 16.9207 51.0601 27.1806 46.6601 34.9506ZM22.2301 17.5307C21.7155 17.8334 21.2975 18.2761 21.0248 18.8072C20.7522 19.3384 20.6361 19.9361 20.6901 20.5307C21.5001 25.6107 35.3501 32.0306 42.8001 34.9506C40.2601 30.0506 33.4501 18.0707 26.8801 16.4907C26.4416 16.3819 25.9918 16.3249 25.5401 16.3207C24.3306 16.3322 23.1619 16.7594 22.2301 17.5307V17.5307ZM41.2301 10.2306C38.2901 14.4806 42.1701 27.3207 44.7001 34.0707C47.0301 27.5007 50.5001 15.0707 47.5401 10.5507C47.1897 10.0153 46.7078 9.5789 46.1405 9.28301C45.5733 8.98712 44.9396 8.84169 44.3001 8.86065H44.1201C43.553 8.81154 42.9829 8.91224 42.4669 9.15267C41.951 9.3931 41.5072 9.76482 41.1801 10.2306H41.2301Z" fill="black" />
                </g>
                <path d="M91.39 33.8308H0V96.6108H91.39V33.8308Z" fill="#FF654E" />
                <path opacity="0.6" d="M91 34H0V97H91V34Z" fill="white" fill-opacity="0.4" />
                <path opacity="0.2" d="M36 34H0V97H36V34Z" fill="white" />
                <path d="M68.3299 33.8308H60.8999V96.6108H68.3299V33.8308Z" fill="#303030" />
                <path d="M18.2801 33.8308H12.8301V96.6108H18.2801V33.8308Z" fill="#303030" />
                <path opacity="0.2" d="M68.3299 33.8308H60.8999V96.6108H68.3299V33.8308Z" fill="black" />
                <path opacity="0.1" d="M18.2801 33.8308H12.8301V96.6108H18.2801V33.8308Z" fill="black" />
                <path d="M100.88 48.2308C97.47 48.5808 86.13 49.4408 82.2 45.0108C81.5366 44.2871 81.0755 43.4015 80.8631 42.4431C80.6507 41.4846 80.6945 40.487 80.99 39.5508C81.83 36.1608 84.36 34.4808 87.93 34.4808C92.59 34.4808 98.76 37.6508 101.93 41.4808C104.04 37.8208 108.16 32.2709 114.36 32.9009C118.86 33.3509 122.26 36.7709 121.94 40.5309C121.77 42.5309 119.87 48.9309 102.94 48.1509L101.68 51.4808L100.88 48.2308ZM87.88 38.2308C86.03 38.2308 85.02 38.7908 84.59 40.5108C84.29 41.7208 84.59 42.1108 84.97 42.5108C87.07 44.8708 94.53 45.2108 99.67 44.7608C97.84 41.7508 92.05 38.2509 87.93 38.2509L87.88 38.2308ZM104.52 44.4609C114.97 44.7209 118.09 41.9009 118.23 40.2409C118.35 38.7609 116.58 36.9208 114.03 36.6708C113.833 36.6609 113.637 36.6609 113.44 36.6708C108.93 36.6508 105.79 41.8509 104.52 44.4609Z" fill="#F3F3F3" />
                <path d="M65.4 96.6008L138.78 96.6008V46.1908L65.4 46.1908V96.6008Z" fill="#FDCD71" />
                <path d="M83.9101 96.6008H89.8701V46.1908H83.9101V96.6008Z" fill="#F3F3F3" />
                <path d="M124.09 96.6008H128.47V46.1908H124.09V96.6008Z" fill="#F3F3F3" />
                <path opacity="0.2" d="M109.62 96.6008H138.78V46.1908L109.62 46.1908V96.6008Z" fill="black" />
                <path opacity="0.2" d="M83.9101 96.6008H89.8701V46.1908H83.9101V96.6008Z" fill="white" />
                <path d="M26.52 69.6508C26.07 68.4608 26.03 66.6508 28.37 64.5608C28.9692 64.0111 29.6862 63.6056 30.466 63.3751C31.2459 63.1446 32.0681 63.0952 32.87 63.2308C37.3 63.9308 41.62 69.6808 43.32 72.2308C45.76 68.8808 52.67 59.9808 57.05 60.7708C58.53 61.0308 59.54 62.2108 60.05 64.2808C60.375 65.355 60.4448 66.4902 60.2538 67.596C60.0629 68.7019 59.6164 69.7479 58.95 70.6508C55.24 75.6508 45.25 76.1408 44.82 76.1508C36.88 76.0808 28.07 73.8608 26.52 69.6508ZM44.1 74.2808H44.78C45.24 74.2808 54.37 73.7308 57.5 69.5108C58.0002 68.8255 58.3315 68.0318 58.467 67.1942C58.6026 66.3567 58.5385 65.4989 58.28 64.6908C57.95 63.3908 57.43 62.6908 56.73 62.5408C56.6269 62.5305 56.523 62.5305 56.42 62.5408C53.33 62.4808 47.3 69.5508 44.06 74.2408L44.1 74.2808ZM29.52 65.9108C28.28 66.9908 27.83 68.0208 28.18 68.9708C29.04 71.2808 34.59 73.7608 42.38 74.1808C41.79 73.2408 36.98 65.7108 32.53 65.0108C32.3253 64.9747 32.1177 64.958 31.91 64.9608C31.0226 64.9676 30.1699 65.3066 29.52 65.9108V65.9108Z" fill="#F3F3F3" />
                <path d="M5.42007 96.6108L78.8101 96.6108V73.8008L5.42007 73.8008V96.6108Z" fill="#4A89C1" />
                <path d="M23.9399 96.6108H29.8999L29.8999 73.8008H23.9399L23.9399 96.6108Z" fill="#F3F3F3" />
                <path d="M64.12 96.6108H68.5V73.8008H64.12V96.6108Z" fill="#F3F3F3" />
                <path opacity="0.2" d="M49.6401 96.6108H78.8V73.8008H49.6401V96.6108Z" fill="black" />
            </svg>
            {
                subscription
                    ? <>
                        <Flex
                            direction={'column'}
                            gap={'8px'}
                            zIndex={1}
                        >
                            <StyledSpan
                                fontSize={'28px'}
                                fontWeight={'700'}
                                color={"#FFFFFF"}
                            >
                                СПАСИБО ЗА ПОДПИСКУ!
                            </StyledSpan>
                            <StyledP
                                color={'#FFFFFF'}
                            >
                                Мы ценим ваше время и<br />
                                обещаем не беспокоить лишний раз
                            </StyledP>
                        </Flex>
                    </>
                    : <>
                        <Flex
                            direction={'column'}
                            gap={'8px'}
                            zIndex={1}
                        >
                            <StyledSpan
                                fontSize={'28px'}
                                fontWeight={'700'}
                                color={"#FFFFFF"}
                            >
                                ВЫГОДНАЯ РАССЫЛКА
                            </StyledSpan>
                            <StyledP
                                color={'#FFFFFF'}
                            >
                                Подписывайтесь и получайте<br />секретные предложения
                            </StyledP>
                        </Flex>
                        <Flex
                            align={'flex-start'}
                            mt={'24px'}
                        >
                            <Flex
                                direction={'column'}
                                zIndex={1}
                                align={'center'}
                                mr={'16px'}
                            >
                                <Div
                                    width={'360px'}
                                >
                                    <InputBanner
                                        value={values.email}
                                        isDirty={touched.email}
                                        errorMessage={errors.email}
                                        onFocus={() => setFieldTouched('email', true, false)}
                                        onChange={(e) => {
                                            setFieldValue('email', e.target.value)
                                        }}
                                    />
                                </Div>
                                <StyledP
                                    fontSize={'10px'}
                                    color={'#FFFFFF'}
                                    mt={'8px'}
                                    textAlign={'center'}
                                >
                                    Нажимая на кнопку «Подписаться»,<br />вы соглашаетесь с политикой конфиденциальности
                                </StyledP>
                            </Flex>
                            <StyledBannerStatisticsBtn
                                disabled={!(isValid && dirty)}
                                onClick={() => {
                                    handleSubmit();
                                    setSubscription(true);
                                }}>
                                Подписаться
                            </StyledBannerStatisticsBtn>
                        </Flex>
                    </>
            }
        </Flex>
    )
}